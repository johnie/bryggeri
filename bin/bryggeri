#!/usr/bin/env bash

version="0.0.1"

# Packages to install
packages=(
    "cask"
    "mas"
    "tmux"
    "chrome-cli"
    "curl"
    "git"
    "git-extras"
    "go"
    "hr"
    "htop-osx"
    "hub"
    "imagemagick"
    "irssi"
    "openssl"
    "python"
    "tree"
    "wget"
    "the_silver_searcher"
    "coreutils"
    "youtube-dl"
    "ffmpeg"
    "speedtest-cli"
    "rclone"
    "jq"
    "ncdu"
    "nmap"
    "entr"
    "bat"
    "exa"
    "fx"
)

# usage info
usage() {
cat <<EOF

    Usage: bryggeri [options]

    Options:
        -V, --version    Output version
        -L, --list       Output the packages
        -h, --help       This message
        --               End of options

EOF
}


# parse options
while [[ "$1" =~ ^- && ! "$1" == "--" ]]; do
    case $1 in
        -V | --version )
            echo $version
            exit
            ;;
        -L | --list )
            echo ${packages[@]}
            exit
            ;;
        -h | --help )
            usage
            exit
            ;;
    esac
    shift
done
if [[ "$1" == "--" ]]; then shift; fi


# Main function
bryggeri() {

    # First, check if you already have on of the packages installed
    # if not, install it

    for pkg in "${packages[@]}"; do
        if brew list -1 | grep -q "^${pkg}\$"; then
            printf "\e[92m[âœ”] \e[32mPackage \e[39m'$pkg' \e[32mis already installed!\n"
        else
            brew install $(IFS=" "; echo "${pkg[@]}")
        fi
    done
}

bryggeri
